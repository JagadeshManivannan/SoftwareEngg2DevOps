\chapter{Individual steps and test description}

In this chapter we are going to describe the tests that need to be executed for every couple of components which interact with each other. Since the controllers communicate through the MapManager, the Integration Testing proceeds in the same way.

\section{Integration test case I1}
\begin{table}[H]
	\centering
	\begin{tabular*}{\textwidth}{p{4.4cm} @{\extracolsep{0.5cm}} p{8.5cm}}
		\hline
		\textbf{Test case identifier} & I1T1 \\
		\hline
		\textbf{Test item(s)} & Database \(\rightarrow\) Availability Helper \\
		\hline
		\textbf{Input specification} & Create typical SQL query (Database inputs) \\
		\hline
		\textbf{Output specification} & Check if the correct functions are called in the Availability Helper \\
		\hline
		\textbf{Environmental needs} & Necessary input parameters for testing \\
		\hline
	\end{tabular*}
\end{table}

\section{Integration test case I2}
\begin{table}[H]
	\centering
	\begin{tabular*}{\textwidth}{p{4.4cm} @{\extracolsep{0.5cm}} p{8.5cm}}
		\hline
		\textbf{Test case identifier} & I2T1 \\
		\hline
		\textbf{Test item(s)} & Availability Helper \(\rightarrow\) Selection Controller \\
		\hline
		\textbf{Input specification} & -- \\
		\hline
		\textbf{Output specification} & -- \\
		\hline
		\textbf{Environmental needs} & I1 succeeded \\
		\hline
	\end{tabular*}
\end{table}

\begin{table}[H]
	\centering
	\begin{tabular*}{\textwidth}{|p{4.cm}|p{8.86cm}|}
		\hline	
		\multicolumn{2}{|c|}{checkAvailability(zone)} \\
		\hline
		\textit{Input} & \textit{Effect} \\
		\hline
		A valid zone & Returns a list containing all the available cars in that zone \\
		\hline
		An invalid zone & An InvalidZoneException is generated \\
		\hline
		An null zone & A NullZoneException is generated \\
		\hline
	\end{tabular*}
\end{table}

\section{Integration test case I3}
\begin{table}[H]
	\centering
	\begin{tabular*}{\textwidth}{p{4.4cm} @{\extracolsep{0.5cm}} p{8.5cm}}
		\hline
		\textbf{Test case identifier} & I3T1 \\
		\hline
		\textbf{Test item(s)} &  Availability Helper \(\rightarrow\) Reservation Controller\\
		\hline
		\textbf{Input specification} & -- \\
		\hline
		\textbf{Output specification} & -- \\
		\hline
		\textbf{Environmental needs} & I1 succeeded \\
		\hline
	\end{tabular*}
\end{table}

\begin{table}[H]
	\centering
	\begin{tabular*}{\textwidth}{|p{4.cm}|p{8.86cm}|}
		\hline	
		\multicolumn{2}{|c|}{changeTagRequest(car, tag) returns response} \\
		\hline
		\textit{Input} & \textit{Effect} \\
		\hline
		A valid car and a valid tag & If parameter tag != old(car.tag) returns positive response. Otherwise an UnconsistentChangeException is generated (in this case most of the times it happens because someone else has been quicker than the user to reserve a car) \\
		\hline
		An invalid tag & An InvalidTagException is generated \\
		\hline
	\end{tabular*}
\end{table}

\section{Integration test case I4}
\begin{table}[H]
	\centering
	\begin{tabular*}{\textwidth}{p{4.4cm} @{\extracolsep{0.5cm}} p{8.5cm}}
		\hline
		\textbf{Test case identifier} & I4T1 \\
		\hline
		\textbf{Test item(s)} & Availability Helper \(\rightarrow\) Parking Controller \\
		\hline
		\textbf{Input specification} & -- \\
		\hline
		\textbf{Output specification} & -- \\
		\hline
		\textbf{Environmental needs} & I1 succeeded \\
		\hline
	\end{tabular*}
\end{table}

\begin{table}[H]
	\centering
	\begin{tabular*}{\textwidth}{|p{4.cm}|p{8.86cm}|}
		\hline	
		\multicolumn{2}{|c|}{getSpecialParkingAreas(destination) returns SpecialParkingAreas} \\
		\hline
		\textit{Input} & \textit{Effect} \\
		\hline
		A valid destination & Returns a possibly empty SpecialParkingArea list \\
		\hline
		An invalid destination & An InvalidDestinationException is generated \\
		\hline
\end{tabular*}
\end{table}

\section{Integration test case I5}
\begin{table}[H]
	\centering
	\begin{tabular*}{\textwidth}{p{4.4cm} @{\extracolsep{0.5cm}} p{8.5cm}}
		\hline
		\textbf{Test case identifier} & I5T1 \\
		\hline
		\textbf{Test item(s)} & Selection Controller \(\rightarrow\) Map Manager \\
		\hline
		\textbf{Input specification} & Post a SelectionController request \\
		\hline
		\textbf{Output specification} & Check if the request is correctly routed \\
		\hline
		\textbf{Environmental needs} & I1, I2 succeeded \\
		\hline
	\end{tabular*}
\end{table}

\begin{table}[H]
	\centering
	\begin{tabular*}{\textwidth}{p{4.4cm} @{\extracolsep{0.5cm}} p{8.5cm}}
		\hline
		\textbf{Test case identifier} & I5T2 \\
		\hline
		\textbf{Test item(s)} & Reservation Controller \(\rightarrow\) Map Manager \\
		\hline
		\textbf{Input specification} & Post a ReservationController request \\
		\hline
		\textbf{Output specification} & Check if the request is correctly routed \\
		\hline
		\textbf{Environmental needs} & I1, I2, I3 succeeded \\
		\hline
	\end{tabular*}
\end{table}

\begin{table}[H]
	\centering
	\begin{tabular*}{\textwidth}{|p{4.cm}|p{8.86cm}|}
		\hline	
		\multicolumn{2}{|c|}{placeReservation(car) returns response} \\
		\hline
		\textit{Input} & \textit{Effect} \\
		\hline
		A valid car & ReservationController will invoke AvailabilityHelper.changeTagRequest() and get the response R. R is then returned \\
		\hline
		A null or invalid car & A NullCarException or InvalidCarException is generated \\
		\hline
	\end{tabular*}
\end{table}

\begin{table}[H]
	\centering
	\begin{tabular*}{\textwidth}{|p{4.cm}|p{8.86cm}|}
		\hline	
		\multicolumn{2}{|c|}{getReservation(user) returns Reservation} \\
		\hline
		\textit{Input} & \textit{Effect} \\
		\hline
		The user logged to the client & ReservationController looks in the database for an active reservation made by the user. If found its returned, otherwise MissingReservationException is generated \\
		\hline
	\end{tabular*}
\end{table}

\begin{table}[H]
	\centering
	\begin{tabular*}{\textwidth}{p{4.4cm} @{\extracolsep{0.5cm}} p{8.5cm}}
		\hline
		\textbf{Test case identifier} & I5T3 \\
		\hline
		\textbf{Test item(s)} & Ride Controller \(\rightarrow\) Map Manager \\
		\hline
		\textbf{Input specification} & Post a RideController request \\
		\hline
		\textbf{Output specification} & Check if the request is correctly routed \\
		\hline
		\textbf{Environmental needs} & I1, I2, I3 succeeded \\
		\hline
	\end{tabular*}
\end{table}

\begin{table}[H]
	\centering
	\begin{tabular*}{\textwidth}{|p{4.cm}|p{8.86cm}|}
		\hline	
		\multicolumn{2}{|c|}{startRide(reservation, userLocation) returns response} \\
		\hline
		\textit{Input} & \textit{Effect} \\
		\hline
		An active reservation, checked by ReservationController .getReservation(u), and userLocation & If the user is not close to the car a NotCloseException is thrown. Otherwise the Ride, Reservation and Car objects are updated and a positive response is returned \\
		\hline
	\end{tabular*}
\end{table}

\begin{table}[H]
	\centering
	\begin{tabular*}{\textwidth}{|p{4.cm}|p{8.86cm}|}
		\hline	
		\multicolumn{2}{|c|}{getRide(user)} \\
		\hline
		\textit{Input} & \textit{Effect} \\
		\hline
		The user logged to the client & ReservationController looks in the database for an active ride of the user. If found its returned, otherwise MissingRideException is generated \\
		\hline
	\end{tabular*}
\end{table}

\begin{table}[H]
	\centering
	\begin{tabular*}{\textwidth}{p{4.4cm} @{\extracolsep{0.5cm}} p{8.5cm}}
		\hline
		\textbf{Test case identifier} & I5T4 \\
		\hline
		\textbf{Test item(s)} & Parking Controller \(\rightarrow\) Map Manager \\
		\hline
		\textbf{Input specification} & Post a ParkingController request \\
		\hline
		\textbf{Output specification} & Check if the request is correctly routed \\
		\hline
		\textbf{Environmental needs} & I1, I2, I3 succeeded \\
		\hline
	\end{tabular*}
\end{table}

\begin{table}[H]
	\centering
	\begin{tabular*}{\textwidth}{p{4.4cm} @{\extracolsep{0.5cm}} p{8.5cm}}
		\hline
		\textbf{Test case identifier} & I5T5 \\
		\hline
		\textbf{Test item(s)} & Discount Controller \(\rightarrow\) Map Manager \\
		\hline
		\textbf{Input specification} & Post a DiscountController request \\
		\hline
		\textbf{Output specification} & Check if the request is correctly routed \\
		\hline
		\textbf{Environmental needs} & I1, I2, I3, I4 succeeded \\
		\hline
	\end{tabular*}
\end{table}

\begin{table}[H]
	\centering
	\begin{tabular*}{\textwidth}{|p{4.cm}|p{8.86cm}|}
		\hline	
		\multicolumn{2}{|c|}{endRide(ride) returns response} \\
		\hline
		\textit{Input} & \textit{Effect} \\
		\hline
		A valid Ride & If the current location of the car is not a legal spot to park, an IllegalSpotException is generated, otherwise the Ride and Car objects are updated, DiscountController.getPrice(Ride) is called, the user's credit updated and a positive response returned \\
		\hline
		An invalid Ride & An InvalidRideException is generated \\
		\hline
		An ongoing Ride & A NotParkedException is generated \\
		\hline
	\end{tabular*}
\end{table}

\section{Integration test case I6}
\begin{table}[H]
	\centering
	\begin{tabular*}{\textwidth}{p{4.4cm} @{\extracolsep{0.5cm}} p{8.5cm}}
		\hline
		\textbf{Test case identifier} & I6T1 \\
		\hline
		\textbf{Test item(s)} & Map Manager \(\leftarrow\) Client Application \\
		\hline
		\textbf{Input specification} & Create typical User/Client inputs \\
		\hline
		\textbf{Output specification} & Check if the correct functions are called in the Map Manager \\
		\hline
		\textbf{Environmental needs} & I1, I2, I3, I4, I5 succeeded \\
		\hline
	\end{tabular*}
\end{table}

\section{Integration test case I7}
\begin{table}[H]
	\centering
	\begin{tabular*}{\textwidth}{p{4.4cm} @{\extracolsep{0.5cm}} p{8.5cm}}
		\hline
		\textbf{Test case identifier} & I7T1 \\
		\hline
		\textbf{Test item(s)} & SMS Gateway \(\rightarrow\) Notification Helper \\
		\hline
		\textbf{Input specification} & Create typical SMS Gateway inputs \\
		\hline
		\textbf{Output specification} & Check if the SMS is delivered \\
		\hline
		\textbf{Environmental needs} & I1, I2, I3, I4, I5, I6 succeeded \\
		\hline
	\end{tabular*}
\end{table}

\section{Integration test case I8}
\begin{table}[H]
	\centering
	\begin{tabular*}{\textwidth}{p{4.4cm} @{\extracolsep{0.5cm}} p{8.5cm}}
		\hline
		\textbf{Test case identifier} & I8T1 \\
		\hline
		\textbf{Test item(s)} & PUSH Gateway \(\rightarrow\) Notification Helper \\
		\hline
		\textbf{Input specification} & Create typical PUSH Gateway inputs \\
		\hline
		\textbf{Output specification} & Check if the correct functions are called in the PUSH Gateway \\
		\hline
		\textbf{Environmental needs} & I1, I2, I3, I4, I5, I6 succeeded \\
		\hline
	\end{tabular*}
\end{table}

\section{Integration test case I9}
\begin{table}[H]
	\centering
	\begin{tabular*}{\textwidth}{p{4.4cm} @{\extracolsep{0.5cm}} p{8.5cm}}
		\hline
		\textbf{Test case identifier} & I9T1 \\
		\hline
		\textbf{Test item(s)} & Notification Helper \(\rightarrow\) Map Manager \\
		\hline
		\textbf{Input specification} & -- \\
		\hline
		\textbf{Output specification} & -- \\
		\hline
		\textbf{Environmental needs} & I1, I2, I3, I4, I5, I6, I7, I8 succeeded \\
		\hline
	\end{tabular*}
\end{table}

\section{Integration test case I10}
\begin{table}[H]
	\centering
	\begin{tabular*}{\textwidth}{p{4.4cm} @{\extracolsep{0.5cm}} p{8.5cm}}
		\hline
		\textbf{Test case identifier} & I10T1 \\
		\hline
		\textbf{Test item(s)} & Database \(\rightarrow\) Account Manager \\
		\hline
		\textbf{Input specification} & Create typical SQL query (Database inputs) \\
		\hline
		\textbf{Output specification} & Check if the correct functions are called in the Availability Helper \\
		\hline
		\textbf{Environmental needs} & -- \\
		\hline
	\end{tabular*}
\end{table}

\section{Integration test case I11}
\begin{table}[H]
	\centering
	\begin{tabular*}{\textwidth}{p{4.4cm} @{\extracolsep{0.5cm}} p{8.5cm}}
		\hline
		\textbf{Test case identifier} & I11T1 \\
		\hline
		\textbf{Test item(s)} & Payment Gateway \(\rightarrow\) Account Manager \\
		\hline
		\textbf{Input specification} & Create typical Payment Gateway inputs \\
		\hline
		\textbf{Output specification} & Check if the payment process correctly executes \\
		\hline
		\textbf{Environmental needs} & I10 succeeded \\
		\hline
	\end{tabular*}
\end{table}

\section{Integration test case I12}
\begin{table}[H]
	\centering
	\begin{tabular*}{\textwidth}{p{4.4cm} @{\extracolsep{0.5cm}} p{8.5cm}}
		\hline
		\textbf{Test case identifier} & I12T1 \\
		\hline
		\textbf{Test item(s)} & Account Manager \(\leftarrow\) Client Application \\
		\hline
		\textbf{Input specification} & -- \\
		\hline
		\textbf{Output specification} & -- \\
		\hline
		\textbf{Environmental needs} & I10, I11 succeeded \\
		\hline
	\end{tabular*}
\end{table}